<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Cognitive Bias Matcher â€“ Counselor Edition (Fixed)</title>
  <style>
    /* same CSS as before (no changes needed) */
  </style>
</head>
<body>
  <div class="container">
    <!-- Welcome -->
    <section class="welcome" id="welcome">
      <div class="welcome-inner">
        <h1>ğŸ§  AI & Cognitive Biases â€” Counselor Edition</h1>
        <div class="card">
          <h2>Welcome, Counselors and Curious Minds ğŸŒ¿</h2>
          <p>Biases in AI use can hinder adoption while fostering unhealthy attachment, echo chambers, and emotional dependency. For counselors, itâ€™s crucial to identify these biases, challenge assumptions, and help clients expand beyond comfort zones.</p>
          <p>Your task: <strong>drag the scenario card onto the thinking trap it reveals</strong>. There are no trick questionsâ€”just awareness, humility, and a little humor.</p>
          <p class="quote">â€œNotice the pattern. Name it with care. Choose your next best move.â€</p>
          <div class="actions">
            <button class="btn" id="startQuick">ğŸš€ Quick Play (10)</button>
            <button class="btn secondary" id="startFull">ğŸ§© Full Deck (37)</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Game -->
    <section class="game" id="game" style="display:none;">
      <div class="header">
        <div class="title">ğŸ¯ Match the Thinking Trap (Drag the card onto a tile)</div>
        <div class="hud card">
          <div class="stat">Score: <span id="score">0</span>/<span id="total">0</span></div>
          <div class="stat">Accuracy: <span id="acc">0%</span></div>
        </div>
      </div>
      <div class="progress card"><div class="bar" id="bar">Question 0</div></div>
      <div class="main">
        <div class="scenario card">
          <div class="label">ğŸ­ Counseling Scenario</div>
          <div id="emoji" class="emoji-scene">ğŸ§‘â€âš•ï¸ğŸ’­</div>
          <div id="dragSrc" class="dragSrc" draggable="true">
            <div class="text" id="scenario"></div>
          </div>
          <div class="dragTip">Drag this card onto a fallacy tile â†’ (or press 1â€“5)</div>
        </div>
        <div class="choices card">
          <h3>Drop onto the correct fallacy</h3>
          <div class="targets" id="targets"></div>
        </div>
      </div>
    </section>

    <!-- Done -->
    <section class="done" id="done" style="display:none;">
      <div class="card" style="max-width:900px;">
        <h1>ğŸ‰ Game Complete!</h1>
        <p style="color:#555;font-size:1.05rem">Awareness is a practice. Thanks for playing with curiosity and care.</p>
        <div class="stats">
          <div class="statbox"><div class="lab">Final Score</div><div class="val" id="finalScore">0</div></div>
          <div class="statbox"><div class="lab">Accuracy</div><div class="val" id="finalAcc">0%</div></div>
        </div>
        <div class="actions" style="margin-top:10px">
          <button class="btn" id="playAgain">ğŸ”„ Play Again</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Feedback Overlay -->
  <div class="overlay" id="overlay">
    <div class="fbox" id="fbox">
      <button class="closex" id="closex">Ã—</button>
      <h2 id="ficon">âœ“</h2>
      <p id="fmsg"></p>
      <div class="explain" id="explain"></div>
      <div class="reflect" id="reflect"></div>
      <div class="stay">(Closes in <span id="count">8</span>s â€” or press Esc)</div>
    </div>
  </div>

<script>
const DATA = [
  {name:"Status Quo Bias",tag:"Resisting change even when better options exist",emoji:"ğŸ§‘â€âš•ï¸ğŸ“„ğŸ—‚ï¸",
   scenario:"â€œPaper works fine,â€ says a therapist, waving off patient portal requestsâ€”though missed intakes keep piling up.",
   explain:"Preferring the current state; changes feel risky or costly.",
   reflect:"Where does familiarity feel safer than effectiveness?"},
  {name:"Catastrophizing",tag:"Leaping to worst-case ends",emoji:"ğŸ“°ğŸ˜±",
   scenario:"Late at night, scrolling headlines about chatbots, a counselor whispers, â€œSo this is how it ends.â€",
   explain:"Exaggerating the likelihood or severity of disaster.",
   reflect:"Whatâ€™s a reasonable best-case to hold alongside the fear?"}
  // ... add the rest of your DATA entries here
];

const $=s=>document.querySelector(s);
const shuffle=a=>a.map(v=>[Math.random(),v]).sort((x,y)=>x[0]-y[0]).map(x=>x[1]);
const state={deck:[],qIndex:0,score:0,attempts:0,total:0,current:null};

function startGame(n){
  $('#welcome').style.display='none';
  $('#done').style.display='none';
  $('#game').style.display='grid';
  state.deck=shuffle([...DATA]).slice(0,Math.min(n,DATA.length));
  state.qIndex=0;state.score=0;state.attempts=0;state.total=state.deck.length;
  $('#total').textContent=state.total;$('#score').textContent=0;$('#acc').textContent='0%';
  renderQuestion();
}

function renderQuestion(){
  const item=state.deck[state.qIndex];
  state.current=item;
  $('#emoji').textContent=item.emoji||'ğŸ§‘â€âš•ï¸ğŸ’­';
  $('#scenario').textContent=item.scenario;
  const pool=DATA.filter(x=>x.name!==item.name);
  const distractors=shuffle(pool).slice(0,4);
  const opts=shuffle([item,...distractors]);
  const letters=['1','2','3','4','5'];
  $('#targets').innerHTML=opts.map((o,i)=>`
    <div class="tile" data-name="${o.name}">
      <div class="letter">${letters[i]}</div>
      <div><div class="tname">${o.name}</div><div class="ttag">${o.tag}</div></div>
    </div>`).join('');
  document.querySelectorAll('.tile').forEach(tile=>tile.onclick=()=>handleChoice(tile.dataset.name));
}

function handleChoice(name){
  const correct=state.current;
  const ok=name===correct.name;
  state.attempts++;
  if(ok)state.score++;
  showFeedback(ok,`Answer: ${correct.name}`,correct.explain,correct.reflect);
  state.qIndex<state.total-1?setTimeout(()=>renderQuestion(),1000):finish();
  updateHUD();
}
function updateHUD(){
  $('#score').textContent=state.score;
  $('#acc').textContent=Math.round((state.score/state.attempts)*100)+'%';
}
function finish(){
  $('#game').style.display='none';
  $('#done').style.display='grid';
  $('#finalScore').textContent=`${state.score}/${state.total}`;
  $('#finalAcc').textContent=Math.round((state.score/state.attempts)*100)+'%';
}
const AUTO_CLOSE_MS=8000;
function showFeedback(ok,msg,ex,ref){
  const o=$('#overlay');$('#ficon').textContent=ok?'âœ“':'âœ—';
  $('#fmsg').textContent=msg;$('#explain').textContent=ex;$('#reflect').textContent=ref;
  o.classList.add('show');setTimeout(()=>o.classList.remove('show'),AUTO_CLOSE_MS);
}

$('#startQuick').onclick=()=>startGame(10);
$('#startFull').onclick=()=>startGame(DATA.length);
$('#playAgain').onclick=()=>location.reload();
</script>
</body>
</html>
